<!doctype html>
<html lang="vi">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Valentine c·ªßa anh</title>
  <style>
    :root { --w: 360px; --h: 220px; }
    body{
      margin:0; min-height:100vh; display:grid; place-items:center;
      font-family: system-ui, -apple-system, Segoe UI, Roboto, Arial, sans-serif;
      background: radial-gradient(circle at top, #fff, #ffe6ef);
      color:#111;
    }
    .card{
      width:min(92vw, 520px);
      background:#fff; border-radius:20px; padding:28px 22px;
      box-shadow: 0 10px 30px rgba(0,0,0,.10);
      text-align:center;
    }
    h1{ margin:0 0 10px; font-size:20px; line-height:1.35; }
    p{ margin:0 0 18px; color:#444; font-size:14px; }
.playground{
  position:relative;
  width:min(92vw, 520px);
  height:280px;
  margin:14px auto 0;
  border-radius:18px;
  background: linear-gradient(180deg, #fff7fb, #ffffff);
  border:1px solid rgba(0,0,0,.06);
  overflow:hidden;

  /* th√™m 3 d√≤ng n√†y */
  display:flex;
  justify-content:center;
  align-items:center;
  gap:20px;
}

    button{
      position:absolute;
      border:0;
      border-radius:999px;
      padding:12px 18px;
      font-size:16px;
      cursor:pointer;
      box-shadow: 0 8px 18px rgba(0,0,0,.12);
      user-select:none;
      -webkit-tap-highlight-color: transparent;
    }
    #yes{
      left: 28%;
      top: 55%;
      background:#ff3b7a;
      color:white;
    }
    #no{
      left: 58%;
      top: 55%;
      background:#f1f3f5;
      color:#111;
    }
    .hint{
      position:absolute; left:12px; bottom:10px;
      font-size:12px; color:#666;
    }
  </style>
</head>

<body>
  <div class="card">
    <h1> Ho√†i Thu ∆°i, em c√≥ mu·ªën l√†m c√¥ng ch√∫a c·ªßa anh trong ng√†y Valentine ch·ª©?</h1>
    <p>Ch·ªçn th·∫≠t l√≤ng nha ü•∞ü´£</p>

    <div class="playground" id="area" aria-label="Khu v·ª±c ch·ªçn ƒë√°p √°n">
      <button id="yes" type="button">C√≥ üíñ</button>
      <button id="no" type="button">Kh√¥ng</button>
      <div class="hint"> G·ª£i √Ω: th·ª≠ b·∫•m ‚ÄúKh√¥ng‚Äù xem‚Ä¶</div>
    </div>
  </div>

<script>
  // ====== CH·ªàNH LINK D·∫™N T·ªöI THI·ªÜP ·ªû ƒê√ÇY ======
  const CARD_LINK = "card.html";

  const area  = document.getElementById("area");
  const btnYes = document.getElementById("yes");
  const btnNo  = document.getElementById("no");

  btnYes.addEventListener("click", () => {
    window.location.href = CARD_LINK;
  });

  // tr·∫°ng th√°i n√∫t "Kh√¥ng" ƒë√£ "bung" kh·ªèi h√†ng ngang ch∆∞a
  let unleashed = false;

  // L·∫•y v·ªã tr√≠ hi·ªán t·∫°i (trong khung) c·ªßa n√∫t "Kh√¥ng"
  function getNoPos() {
    // N·∫øu ch∆∞a t·ª´ng set left/top th√¨ coi nh∆∞ (0,0) theo relative layout
    const left = parseFloat(btnNo.style.left || "0");
    const top  = parseFloat(btnNo.style.top  || "0");
    return { left, top };
  }

  // ƒê·∫£m b·∫£o n√∫t lu√¥n n·∫±m trong khung
  function clamp(v, min, max) {
    return Math.max(min, Math.min(max, v));
  }

  // Khi b·∫Øt ƒë·∫ßu "n√©", ta chuy·ªÉn n√∫t sang position:absolute t·∫°i ƒë√∫ng ch·ªó n√≥ ƒëang ƒë·ª©ng,
  // ƒë·ªÉ n√≥ bay t·ª± do m√† kh√¥ng l√†m layout b·ªã gi·∫≠t.
  function unleashNoButton() {
    if (unleashed) return;

    const areaRect = area.getBoundingClientRect();
    const noRect = btnNo.getBoundingClientRect();

    // v·ªã tr√≠ hi·ªán t·∫°i c·ªßa n√∫t t√≠nh theo khung area
    const x = noRect.left - areaRect.left;
    const y = noRect.top  - areaRect.top;

    btnNo.style.position = "absolute";
    btnNo.style.left = `${x}px`;
    btnNo.style.top  = `${y}px`;

    unleashed = true;
  }

  // N√© th√¥ng minh: ƒë·∫©y n√∫t "Kh√¥ng" ra xa kh·ªèi con tr·ªè
  function smartEvade(pointerClientX, pointerClientY) {
    unleashNoButton();

    const areaRect = area.getBoundingClientRect();
    const noRect = btnNo.getBoundingClientRect();

    // T·ªça ƒë·ªô con tr·ªè trong h·ªá to·∫° ƒë·ªô c·ªßa area
    const px = pointerClientX - areaRect.left;
    const py = pointerClientY - areaRect.top;

    // T√¢m n√∫t "Kh√¥ng" trong area
    const nx = (noRect.left - areaRect.left) + noRect.width / 2;
    const ny = (noRect.top  - areaRect.top)  + noRect.height / 2;

    // Vector t·ª´ con tr·ªè -> n√∫t
    let vx = nx - px;
    let vy = ny - py;

    // N·∫øu con tr·ªè n·∫±m ƒë√∫ng gi·ªØa n√∫t (vx,vy ~ 0), ch·ªçn h∆∞·ªõng ng·∫´u nhi√™n nh·∫π
    const len = Math.hypot(vx, vy) || 1;
    vx /= len;
    vy /= len;

    // "ƒë·ªô √°c" = nh·∫£y xa bao nhi√™u m·ªói l·∫ßn n√© (px)
    const jump = 120;

    const cur = getNoPos();
    const newLeft = cur.left + vx * jump;
    const newTop  = cur.top  + vy * jump;

    // gi·ªõi h·∫°n trong khung
    const pad = 8;
    const maxLeft = areaRect.width - noRect.width - pad;
    const maxTop  = areaRect.height - noRect.height - pad;

    btnNo.style.left = `${clamp(newLeft, pad, maxLeft)}px`;
    btnNo.style.top  = `${clamp(newTop,  pad, maxTop)}px`;
  }

  // N·∫øu con tr·ªè ƒë·∫øn g·∫ßn n√∫t trong m·ªôt b√°n k√≠nh nh·∫•t ƒë·ªãnh th√¨ n√©
  function onPointerMove(e) {
    const areaRect = area.getBoundingClientRect();
    const noRect = btnNo.getBoundingClientRect();

    // kho·∫£ng c√°ch t·ª´ con tr·ªè t·ªõi t√¢m n√∫t "Kh√¥ng"
    const px = e.clientX;
    const py = e.clientY;
    const nx = noRect.left + noRect.width / 2;
    const ny = noRect.top  + noRect.height / 2;

    const dist = Math.hypot(nx - px, ny - py);

    // "ƒë·ªô nh·∫°y" = c√†ng l·ªõn c√†ng kh√≥ b·∫•m (px)
    const triggerRadius = 130;

    if (dist < triggerRadius) {
      smartEvade(px, py);
    }
  }

  // PC: n√© theo chuy·ªÉn ƒë·ªông chu·ªôt
  area.addEventListener("mousemove", onPointerMove);

  // Mobile: c·ª© ch·∫°m/ƒë∆∞a ng√≥n tay g·∫ßn th√¨ n√©
  area.addEventListener("pointermove", (e) => {
    // ch·ªâ x·ª≠ l√Ω khi l√† touch ho·∫∑c pen, tr√°nh tr√πng v·ªõi mouse
    if (e.pointerType === "touch" || e.pointerType === "pen") {
      onPointerMove(e);
    }
  });

  // N·∫øu ng∆∞·ªùi d√πng c·ªë "tap" ƒë√∫ng n√∫t Kh√¥ng, cho n√≥ ch·∫°y lu√¥n
  btnNo.addEventListener("pointerdown", (e) => {
    smartEvade(e.clientX, e.clientY);
  });

  // Bonus: n·∫øu tab focus t·ªõi n√∫t Kh√¥ng c≈©ng n√©
  btnNo.addEventListener("focus", () => {
    const areaRect = area.getBoundingClientRect();
    smartEvade(areaRect.left + areaRect.width/2, areaRect.top + areaRect.height/2);
  });
</script>

</body>
</html>
